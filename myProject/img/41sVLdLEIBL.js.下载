(function(b){var e=window.AmazonUIPageJS||window.P,k=e._namespace||e.attributeErrors,a=k?k("AmazonGatewayAuiAssets"):e;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,e,k){b.when("A").register("sg-jsutil",function(a){var l=a.$;return{safeCall:function(a,b){return l.isFunction(a)?a(b):b}}});b.when("A","load").execute("ah-inst-img-size",function(a){function l(c){if(!c)return null;var d=g(c).attr("src");c=g(c).data("a-hires");return d===c?null:d}function r(c){"object"===
typeof n.ue&&"function"===typeof n.ue.count&&n.ue&&n.ue.count(c,(n.ue.count(c)||0)+1)}function h(c,d){r("gw-img-size-invoke");g.ajax({type:"HEAD",async:!0,url:c,success:function(c,g,m){r("gw-img-size-success");a.trigger(d,parseInt(m.getResponseHeader("Content-Length"),10))},error:function(d,c,g){r("gw-img-size-error")}})}function f(c,d){0<c.length&&(q[d]={count:c.length,totalSize:0,images:g.unique(c)},g(q[d].images).each(function(c,g){var m=d+"_"+c;a.on(m,function(c){isNaN(c)||(--q[d].count,q[d].totalSize+=
c,0===q[d].count&&n.ue&&n.ue.count(d,q[d].totalSize))});h(g,m)}))}function m(c,d){var g=a.$(c);(g=0>=g.length?null:l(g[0]))&&f([g],d)}function c(c,d){d=d||c.length;var a=[];g(c.slice(0,d)).each(function(d,c){var g=l(c);if(!g)return[];a.push(g)});return a}var g=a.$,n=e,q=[];b.execute("inst-cf-img",function(){r("gw-inst-img");m(".gw-critical-content img","gw-cf-img-size")});b.when("x1").execute("inst-x1-img",function(){b.execute("inst-x1-rec-img",function(){var a=1;g("#gw-content-grid .feed-carousel .feed-carousel-shelf").slice(0,
2).each(function(d,m){if(2>=a){var n="gw-shoveler-img-size-"+a++,l=g(m).find("img");6<=l.length&&(l=c(l,6),f(l,n))}})});b.execute("inst-x1-unrec-img",function(){f(c(a.$("#desktop-unrec-col-1 img")),"gw-unrec-col-1-img-size");f(c(a.$("#desktop-unrec-col-2 img")),"gw-unrec-col-2-img-size");f(c(a.$("#desktop-unrec-col-3 img")),"gw-unrec-col-3-img-size");m("#desktop-unrec-sidekick #dotd-image img","gw-unrec-sidekick-img-size")})})});b.when("A").register("dombinder",function(a){function l(a,
c){var g=0;c=c.split(".");for(var l=c.length;g<l;g++)a=a&&a[c[g]];return a}function b(a){return h.map(h(a).data("bind").split(","),function(c){c=c.split(":");var g=h.trim(c[0]),l=h.trim(c[1]),b=f[g];if(b)return b.init&&b.init(a,l),function(c){b.update(a,l,c)}})}var h=a.$,f={text:{update:function(a,c,g){h(a).text(l(g,c)||"")}},html:{update:function(a,c,g){h(a).html(l(g,c)||"")}},href:{update:function(a,c,g){h(a).attr("href",l(g,c)||"")}},trimText:{update:function(a,c,g){a=h(a);g=a.text();if(g.length>
c){for(var l=c-4;0<=l&&0<"[.,-/#!$%^&*;:{}=-_`~()] ".indexOf(g[l]);)l--;a.text(g.substring(0,0<=l?l+1:c-3)+"...")}}},value:{update:function(a,c,g){h(a).val(l(g,c)||"")}},visible:{update:function(a,c,g){var b=!1;"!"===c.charAt(0)&&(b=!0,c=c.substring(1));c=!!l(g,c);b!==c?h(a).show():h(a).hide()}},css:{init:function(a,c){var g=h(a),l=g.data("dombcss")||[];l[c]="";g.data("dombcss",l)},update:function(a,c,g){a=h(a);var b=a.data("dombcss"),f=b[c];g=l(g,c);f!==g&&(b[c]=g,f&&a.removeClass(f),g&&a.addClass(g))}},
attr:{init:function(a,c){var g=h(a),l=g.data("dombattr")||[];l[c]={};g.data("dombattr",l)},update:function(a,c,g){var b=h(a);a=b.data("dombattr");var f=a[c];g=l(g,c);f!==g&&(a[c]=g,f&&h.each(f,function(c,d){b.removeAttr(c)}),g&&h.each(g,function(c,d){b.attr(c,d)}))}}};return{init:function(a){var c={$root:a,bindings:[]};a.find("[data-bind]").each(function(){h.each(b(this),function(g,a){c.bindings.push(a)})});return c},update:function(a,c){h.each(a.bindings,function(g,a){a(c)})}}});b.when("jQuery").register("gwAjax",
function(a){return function(l,b){function h(g,a,h){"object"===typeof e.ue&&"function"===typeof e.ue.count&&(f(b.errorCounter||"gwAjaxError"),b.id&&f("gwAjaxError:"+b.id));"function"===typeof e.ueLogError&&e.ueLogError({logLevel:"WARN",attribution:"gwAjax-"+(b.id||l),message:"gwAjax call failed "+(JSON&&JSON.stringify?JSON.stringify({url:l,"params-data":b.params||b.data}):"")});"function"===typeof c&&c(g,a,h)}function f(c){"object"===typeof e.ue&&"function"===typeof e.ue.count&&e.ue.count(c,(e.ue.count(c)||
0)+1)}b=a.extend(!0,{},b);var m=b.success,c=b.error;b.success=function(c,a,b){c.error?h(c,a,b):"function"===typeof m&&m(c,a,b)};b.error=h;b.data=b.params?b.params:b.data;f("gwAjaxCall");b.ajaxCounter&&f(b.ajaxCounter);return a.ajax(l,b)}});b.when("jQuery","gw-hud-punt").execute("gw-hud-sidekick",function(a){a("#gw-hud-grid").css({display:"none"})});b.when("A","sg-jsutil","a-modal","gw-productdb","productdb-binding-helper","sg-media-builder","gw-sims","gw-popover-data").register("gw-popover",
function(a,l,r,h,f,m,c,g){function n(d,c){e.uet&&e.uet(d,c,{wb:1})}function q(d){if(e.ue&&"function"===typeof e.ue.count)return e.ue.count(d)||0}function v(d){e.ue&&"function"===typeof e.ue.count&&e.ue.count(d,(e.ue.count(d)||0)+1)}function d(d){return d.closest("*[data-sgproduct]").data("sgproduct")}function x(d,c){y[d.asin]&&y[d.asin].isResolved()?A.resetSimData():(y[d.asin]=u.Deferred(),d&&d.asin&&c?A.fetch(d,c,y[d.asin]):y[d.asin].reject())}var u=a.$,k={},y={};if(!u("html").hasClass("a-touch")){l=
u('<span style="display: none" />').appendTo("body");var p=u("#gw-popover-wrapper"),t=new f(h,p),B=r.create(l,{name:"gw-asin-popover",width:"90%","max-width":900,height:590,popoverLabel:g.popoverLabel,closeButton:!1}),A=new c(t),E=u("#gw-quick-look-btn");u("#a-page").delegate("li[data-sgproduct]","mouseenter",function(d){u(d.currentTarget).append(E);u(d.currentTarget).find("[title]").removeAttr("title");E.addClass("active")});E.mouseenter(function(){var c=u(this),g=d(c),c=c.siblings().children("a").attr("href");
x(g,c)});u(".bestsellers .listRow a").mouseenter(function(){var c=u(this),g=d(c),c=c.attr("href");x(g,c);!g||!g.asin||k[g.asin]&&k[g.asin].isResolved()||!(c=h.get(g.asin))||(k[g.asin]=u.Deferred(),k[g.asin].resolve(c))});b.when("gwAjax").execute(function(d){var c={};u("#a-page").delegate(".fresh-shoveler li[data-sgproduct]","mouseenter mousemove",function(g){g=u(g.currentTarget);var p=g.data("sgproduct").asin;if(!k[p]||!k[p].isResolved()){var t=[];g.add(g.prev("li[data-sgproduct]")).add(g.next("li[data-sgproduct]")).each(function(){var d=
u(this).data("sgproduct");if(d&&d.asin){var g=h.get(d.asin),p=(g=!(!c[d.asin]&&g&&g.loading))&&1500<a.now()-c[d.asin];if(!g||p)t.push(d.asin),c[d.asin]=a.now()}});k[p]=u.Deferred();t.length?(d("/gp/gw/ajax/pdb.html",{id:"quicklook-pdb",data:{swn:"productdb-ajax",sa:'{"asins": ["'+t.join('","')+'"]}',oe:'{"isDesktop":1,"isTablet":0,"isMobile":0}',rrid:e.ue_id}}).done(function(d){h._add(d);for(var g=0;g<t.length;g++)c[t[g]]=Infinity;k[p].resolve(d)}).fail(k[p].reject),v("freshHoverCount")):k[p].resolve()}})});
u("#a-page").delegate("li[data-sgproduct]","mouseleave",function(d){E.removeClass("active")});var C="#a-popover-"+B.attrs("id")+" ";r=u.map([".a-popover-header { display: none; }",".a-popover-inner { padding: 0px !important; margin: 0px !important; overflow: hidden !important; height: 100% !important; }"],function(d){return C+d}).join(" ");u("head").append("<style>"+r+"</style>");a.on("a:popover:hide:gw-asin-popover",function(d){e.history.state&&e.history.state.popup&&e.history.back();t.clear()});
u(e).bind("popstate",function(){B.hide()});return{show:function(d,c){v("freshPopOverOn");n("bb","popoverLatency"+q("freshPopOverOn"));e.history&&e.history.pushState&&e.history.pushState({popup:1},"");t.setAsin(d,{beforeUpdate:function(g){if(g.loading)return v("freshPopOverLoading"),g;var p=(new m(g.images[0])).autoCrop().scaleXY(500,400).build(),p={url:c,image:p,actionUrl:{action:"/gp/product/handle-buy-box/"+function(d){return d.substring(d.indexOf("/ref=")+1,d.length)}(c)}};g.reviews&&(p.reviews=
u.extend({},g.reviews,{url:c+"#customerReviews"}));u.when(y[d],k[d]).done(function(c,g){A.showSims(d,c)});y[d].fail(A.setNoSimView);n("cf","popoverLatency"+q("freshPopOverOn"));return u.extend({},g,p)}});B.show()},hide:function(){B.hide()}}}});b.when("A","sg-media-builder","gw-productdb").register("gw-sims",function(a,l,r){var h=a.$;return function(a){function m(d,c){e.uet&&e.uet(d,c,{wb:1})}function c(d){if(e.ue&&"function"===typeof e.ue.count)return e.ue.count(d)||0}function g(d){e.ue&&
"function"===typeof e.ue.count&&e.ue.count(d,(e.ue.count(d)||0)+1)}function n(){if(!C){C=!0;I.hide();F.show();H.animate({height:"100%"},300);var d=0,g=0,p=0,t=parseInt(F.css("width"),10),a=F.find(".sims-img-link");a.each(function(c,a){d+=a.clientWidth;t<d?h(a).hide():(g=d,p+=1)});var b=t-g;0<b&&(b=Math.floor(20+b/p-1),20<b&&a.css({"padding-right":b/2+"px","padding-left":b/2+"px"}));a="popoverLatency"+c("freshPopOverOn");m("be",a);e.uex&&e.uex("ld",a,{wb:1})}}function q(){0===--t&&n()}function v(d,
c){var p=h("<a>"),t=h("<div>");p.attr("class","sims-img-link");t.addClass("sims-img-border");c&&p.addClass("selected");p.click(function(){g("freshPopOverSimsClick");F.find(".sims-img-link").removeClass("selected");h(this).addClass("selected");a.clear();a.setAsin(d.asin,{beforeUpdate:function(c){c=h.extend(!0,{},d);var p=d.url;if(c.loading)g("freshPopOverLoading");else{var t=(new l(c.images[0])).autoCrop().scaleXY(500,400).build(),t={url:p,image:t,actionUrl:{action:"/gp/product/handle-buy-box/"+k(p)}};
c.reviews&&(t.reviews=h.extend({},c.reviews,{url:p+"#customerReviews"}));c=h.extend({},c,t)}return c}})});return p.append(t)}function d(){h.each(B,function(d,c){c.url=c.url.replace(/ref=gw_pdb_pdt-[\d]+/,k(A)+"&gw_sims-"+d)})}function k(d){return 0<=d.indexOf("redirect.html?")?d.replace(/.*redirect.html|(token|location)=.*?&/g,""):d.substring(d.indexOf("/ref=")+1,d.length)}function u(){C=!1;d();var c=[];t=B.length>t?t:B.length;h(B).each(function(d,g){g.loading=!1;if(g.images[0].src){var p=(new l(g.images[0])).autoCrop().scaleXY(130,
100).build().src,a=h("<img>");a.attr("src",p);a.attr("class","sims-img");a.load(q);p=h("<div>");p.attr("class","sims-img-container");var b=h("<div>");b.addClass("sims-img-overlay");h(p).append(b);p.append(a);a=v(g,0===d);a.append(p);c.push(a)}return d<t-1});t=c.length;h(c).each(function(d,c){F.append(c)});setTimeout(n,E)}function z(){b.when("gw-popover").execute(function(d){d.hide()})}function y(){I.hide();H.addClass("hidden");D.bind("click",z)}function p(){F.empty();H.add(I).removeAttr("style");
H.removeClass("hidden");D.unbind("click",z);I.show();F.hide();t=8;B=[]}var t,B,A,E=1E4,C=!1,D=h("#sims-section"),H=D.find(".sims-wrapper"),I=D.find(".sims-loading"),F=D.find(".sims-details");h("#gw-asin-popover");return{fetch:function(d,g,t){m("af","popoverLatency"+c("freshPopOverOn"));p();A=g;d.url=A;B.push(d);g=r.get(d.asin);setTimeout(t.reject,E);g.sims?t.resolve(g.sims):b.when("gwAjax").execute(function(c){c("/gp/gw/ajax/pdb.html",{id:"quicklook-sims-pdb",data:{swn:"productdb-ajax",sa:'{"asins": [], "entityId":"'+
d.asin+'","datasetId": "purchase"}',oe:'{"isDesktop":1,"isTablet":0,"isMobile":0}',rrid:e.ue_id}}).done(function(c){if(c&&c.p&&0<c.p.length){var g=d.asin,p=c.p;p&&(r.get(g).sims||r.addSims(g,p));return t.resolve(c.p)}return t.reject()}).fail(t.reject)});return t},setNoSimView:y,showSims:function(d,c){var p=r.get(d);p.loading?g("freshPopOverSimLoadBeforePrimeAsin"):B=p.sims?h.merge([p],p.sims):h.merge([p],c);4<B.length?u():(g("simsLessThanThreshold"),y())},resetSimData:p,setWaitPeriod:function(d){E=
d}}}});b.when("A").execute(function(a){var l=a.$,r,h;if(!a.$("html").hasClass("a-touch"))if(e.cvox)e.ue&&e.ue.tag&&e.ue.tag("screenReaderOn");else{l("#a-page").delegate("*[data-sgproduct] #gw-quick-look-btn","click",function(a){f(a)});l("#a-page").delegate(".bestseller-list *[data-sgproduct]","click",function(a){f(a)});b.when("gw-popover").execute(function(a){r=a;l("#gw-popover-close").click(function(){r.hide()});h&&r.show.apply(r,h)});var f=function(a){if(!(1<a.which||a.shiftKey||a.altKey||
a.metaKey||a.ctrlKey)){var c,g;l(a.target).parents(".bestseller-list").length?(c=l(a.currentTarget).data("sgproduct"),g=l(a.target).closest("a").attr("href")):(c=l("#gw-quick-look-btn").closest("*[data-sgproduct]").data("sgproduct"),g=l("#gw-quick-look-btn").siblings().children("a").attr("href"));var b=[c.asin,g];c.asin&&g&&(a.preventDefault(),r?r.show.apply(r,b):h=b)}}}});b.when("A","sg-jsutil","dombinder").register("productdb-binding-helper",function(a,b,e){return function(a,f){function m(c,
g){e.update(d,n(g.beforeUpdate,c));c.loading||n(g.load,c)}function c(d){g();v=function(){d(q)};q.pdb_observe(v)}function g(){q&&v&&(q.pdb_unobserve(v),v=null)}var n=b.safeCall,q=null,v=null,d=e.init(f);this.setAsin=function(d,b){b=b||{};g();q=a.get(d);m(q,b);q.loading&&c(function(d){m(d,b)});return q};this.clear=function(){g();q={};e.update(d,q)}}});e.P&&b.when("jQuery","afterLoad").register("gw-resource-logger",function(a){return{instrumentResources:function(b){var r;r=!1;if(a.isArray(b)&&!a.isEmptyObject(b)){r=
!0;for(var h=0;h<b.length;h++){var f=b[h];if("id"in f&&"regex"in f&&"initiator"in f){if(!("string"===typeof f.id&&"string"===typeof f.initiator&&f.regex instanceof RegExp)){r=!1;break}}else{r=!1;break}}}h=e.performance&&"function"===typeof e.performance.getEntriesByType&&"undefined"!==typeof e.performance.getEntriesByType("resource")&&"undefined"!==typeof e.ue;if(r&&h){r=Array(b.length);for(h=0;h<r.length;h++)r[h]=!1;for(f=h=0;f<e.performance.getEntriesByType("resource").length&&h<b.length;f++)for(var m=
e.performance.getEntriesByType("resource")[f],c=m.name,g=m.initiatorType,n=0;n<b.length;n++)if(!r[n]){var q=b[n].regex;if(g===b[n].initiator&&q.test(c)){c=b[n].id;g=m;m=g.duration;e.ue.count&&(e.ue.count(c+":duration",m),e.ue.count(c+":startTime",g.startTime));e.ue.tag&&(g=void 0,g=50>m?c+":cached":c+":notCached",e.ue.tag(g));r[n]=!0;h++;break}}}}}});b.register("sg-media-builder",function(){return function(a){var b=this,e=a.src,h=[];b.build=function(){var b=h.join("_");return{src:e.replace(/\.([^.]+)$/,
"._"+b+"_.$1"),alt:a.alt}};b.autoCrop=function(){h.push("AC");return b};b.scaleX=function(a){h.push("SX"+a);return b};b.scaleY=function(a){h.push("SY"+a);return b};b.upScaleX=function(a){h.push("UX"+a);return b};b.upScaleY=function(a){h.push("UY"+a);return b};b.scaleXY=function(a,h){return b.upScaleX(a).scaleY(h)}}});b.when("A","gwAjax").register("shogunProductDB",function(a,b){function r(b){var c=[];f[b]={loading:!0,pdb_observe:function(g){c.push(g)},pdb_unobserve:function(g){c=a.$.grep(c,
function(c){return c!==g})},_trigger:function(){a.$.each(c,function(){this.call(f[b])})}};return f[b]}function h(h,c){this.ajaxUrl=h;this.experienceStr=c;this._add=function(c){c.p&&a.$.each(c.p,function(c,g){if(g.asin){var b=f[g.asin]||r(g.asin);a.$.extend(b,g,{loading:!1,error:!1});b._trigger(g)}})};this.addSims=function(c,b){if(b){var l=f[c]||r(c);a.$.extend(l,{sims:b});l._trigger(c)}};this._ajax=function(g,f){var q=a.$.extend(!0,{},h,{params:{sa:JSON.stringify(g),oe:c}});e.ue_sid&&(q.url+="/"+
e.ue_sid);e.ue_id&&(q.params.rrid=e.ue_id);return b(q.url,{method:q.method,params:q.params,success:f.success,error:f.error,id:"gw-jslibs-"+f.id})};this.get=function(c){return c in f?f[c]:r(c)}}var f={};return function(a,c){return new h(a,c)}});b.when("jQuery","p-detect").register("component-feed-carousel",function(a,l){var r=a.extend(!0,{},l);a.each({pointerPrefix:function(){return"onmspointerup"in document||"onpointerup"in document?"onpointerup"in document?"pointer":"MSPointer":!1},
actionMode:function(){var a=r.capabilities.pointerPrefix;return a?a:r.capabilities.touch?"touch":"mouse"}},function(a,c){r.capabilities[a]=c()});var h={};a.each({start:{mouse:"down",touch:"start",pointer:"down",MSPointer:"Down"},end:{mouse:"up",touch:"end",pointer:"up",MSPointer:"Up"}},function(a,c){var g=r.capabilities.actionMode,b="string"===typeof c?c:c[g];h[a]=b?g+b:c.mouse===k?"":"mouse"+c.mouse});r.action=h;var f=function(a,c,g,b){this.init(a,c,g,b)};f.prototype={init:function(l,c,g,f){var h=
this;a("html").hasClass("a-touch")&&l.addClass("feed-carousel-touch");h.adjustMarginOnChange=!0;h.defaultCssRightMargin=null;h.minItems=c||10;h.imgClass=".product-image";h.config=f||{};h.$carousel=l;h.cfMinItems=g||6;h.cfFired=!1;h.shovelerReadyFired=!1;h.slotId=h.getSlotId();h.touch=h.$carousel.hasClass("feed-carousel-touch");h.ajaxSource=h.$carousel.parent().hasClass("ajaxSource");h.$shelf=h.$carousel.find(".feed-carousel-shelf");h.$viewport=h.$carousel.find(".feed-carousel-viewport");h.$spinner=
h.$carousel.find(".spinner");h.$left=a(".feed-carousel-control.feed-left",l);h.$right=a(".feed-carousel-control.feed-right",l);h.$buttons=a(".feed-carousel-control",l);h.$thumb=a(".feed-scrollbar-thumb",l);h.shelfLeft=-1*parseInt(h.$shelf.css("left"),10);h.calcWidth=a("html").hasClass("a-lt-ie9");h.noOpacity=a("html").hasClass("a-lt-ie9");h.uniqueId=h.getUniqueId();h.$left.attr("aria-hidden",!0);h.$right.attr("aria-hidden",!0);h.bindEvents();h.$carousel.data("Carousel",h);h.$carousel.trigger("change");
h.token=!1;h.lock=function(){h.token=!0};h.unlock=function(){h.token=!1};h.locked=function(){return h.token};b.when("gw-first-carousel").execute(function(){h.first=h.$carousel.hasClass("first-carousel");h.shouldControlsOn()?h.showControls():h.hideControls()});h.uniqueId&&b.when(h.uniqueId).execute(function(c){h.appendCards(c.cards);if(c.cards&&h.slotId&&"object"===typeof e.ue&&"function"===typeof e.ue.count){var d="gw-"+h.slotId.toString()+"-lazy-cards",g="gw-"+h.slotId.toString()+"-lazy";e.ue.count(d,
(e.ue.count(d)||0)+c.cards.length);e.ue.count(g,(e.ue.count(g)||0)+1)}})},getUniqueId:function(){if(this.$viewport){var b=this.$viewport.closest(".shogun-widget");return 0<b.length?a(b[0]).attr("id"):null}},getSlotId:function(){var b=this.$carousel.closest(".gw-widget-instrument");return 0<b.length?a(b[0]).attr("id"):null},bindEvents:function(){function b(c){return r.capabilities.pointerPrefix&&-1<a.inArray(c.originalEvent.pointerType,[2,"touch"])||"touch"===r.capabilities.actionMode}var c=this,g=
a("body");c.$buttons.ready(function(g){c.shovelerReadyFired||(c.slotId&&(g=c.slotId.toString()+"-active",e.GWI&&e.GWI.recordLatency(g),e.GWI&&e.GWI.register(g)),c.shovelerReadyFired=!0)});c.$carousel.change(function(g){c.updateItems();c.updateSpinner();c.updateShelf();c.updateControls();null===c.defaultCssRightMargin&&c.$shelf.children("li").first()&&(c.defaultCssRightMargin=parseInt(c.$shelf.children("li").first().css("margin-right"),10));c.adjustMarginOnChange&&c.adjustCardMargin()});c.$left.click(function(g){g.preventDefault();
c.changePage(-1);c.slotId&&c.logCounter("gw-"+c.slotId.toString()+"-left")});c.$right.click(function(g){g.preventDefault();c.changePage(1);c.slotId&&c.logCounter("gw-"+c.slotId.toString()+"-right")});c.bindImageLoadEvents(c.$shelf);var h;a(e).resize(function(){clearTimeout(h);h=setTimeout(function(){var g=c.getDimensions(),g=Math.max(Math.min(g.shelfLeft,g.maxLeft),0);c.moveShelf(g)},100)});c.$thumb.mousedown(function(b){var h=b.clientX;1===b.which&&(b.preventDefault(),c.$carousel.addClass("scrolling"),
g.bind("mousemove.feed-carousel",function(d){var g=c.getDimensions(),g=Math.max(Math.min(g.shelfLeft+1/g.pageRatio*(d.clientX-h),g.maxLeft),0);h=d.clientX;c.moveShelf(g)}),a(document).bind("selectstart.feed-carousel",function(){return!1}))});g.add(e).mouseup(function(b){c.$carousel.removeClass("scrolling");c.$carousel.hasClass("hovering")||c.hideControls();g.unbind("mousemove.feed-carousel");a(document).unbind("selectstart.feed-carousel")});c.$carousel.hover(function(){c.$carousel.addClass("hovering");
clearTimeout(c.hoverTimer);c.hoverTimer=setTimeout(function(){c.$carousel.hasClass("hovering")&&!c.$carousel.hasClass("touching")?c.showControls():c.$carousel.removeClass("touching")},300)},function(){c.$carousel.removeClass("hovering touching");clearTimeout(c.hoverTimer);c.$carousel.hasClass("scrolling")||(c.hoverTimer=setTimeout(function(){c.$carousel.hasClass("hovering")||c.hideControls()},600))});c.$carousel.bind(r.action.start,function(g){b(g)&&(c.$carousel.addClass("touching"),clearTimeout(c.touchTimer),
c.touchTimer=setTimeout(function(){c.$carousel.removeClass("touching")},5E3))});c.$carousel.bind(r.action.end,function(g){b(g)&&(c.$carousel.removeClass("touching"),clearTimeout(c.touchTimer),clearTimeout(c.hoverTimer))});c.$viewport.scroll(function(){c.shelfLeft=c.$viewport.scrollLeft();c.updateControls()})},bindImageLoadEvents:function(b){var c=this;a(c.imgClass,b).one("load",function(){c.$carousel.trigger("change")})},getDimensions:function(){var a=this.$shelf.width(),c=this.shelfLeft,g=this.$carousel.width();
return{pageWidth:g,shelfWidth:a,shelfLeft:c,pageRatio:g/a,leftRatio:c/a,maxLeft:a-g}},updateItems:function(){var b=this,c=b.$shelf.find(".feed-carousel-card"),g=function(c){return"none"===c.css("display")};c.each(function(c,h){var l=a(h);if(!g(l)&&!b.config.visibleBeforeLoad)return!0;l.attr("aria-posinset",c+1);l.attr("aria-hidden",!1);l.attr("role","listitem");return 0>=l.find(b.imgClass).filter(function(){return!this.complete}).length?(l.css("display","inline-block"),c+1>=b.cfMinItems&&!b.cfFired&&
(b.slotId&&(l=b.slotId.toString()+"-visible",e.GWI&&e.GWI.recordLatency(l),e.GWI&&e.GWI.register(l)),b.cfFired=!0),!0):!1});c.attr("aria-setsize",c.size());b.$items=c.filter(function(){return!g(a(this))})},updateShelf:function(){var b=0;this.calcWidth&&(this.$shelf.children().each(function(){b+=a(this).outerWidth(!0)}),this.$shelf.width(b));this.touch&&this.$carousel.not(".fresh-shoveler-tablet-app .feed-carousel").height(this.$shelf.outerHeight(!0))},updateSpinner:function(){this.size()<this.minItems&&
this.ajaxSource?this.$spinner.show():(this.size()<this.minItems&&"object"===typeof e.ue&&"function"===typeof e.ue.count&&e.ue.count("shovelerNotEnoughItem",(e.ue.count("shovelerNotEnoughItem")||0)+1),this.$spinner.hide())},updateControls:function(){this.updateArrows();this.updateScrollThumb()},shouldControlsOn:function(){return this.first&&!this.touch},showControls:function(a){this.$thumb.add(this.$buttons).stop(!0,!0).fadeIn({duration:300,complete:a,queue:!1})},hideControls:function(a){var c=this.$thumb;
this.shouldControlsOn()||(c=c.add(this.$buttons));c.stop(!0,!0).fadeOut({duration:300,complete:a,queue:!1})},appendCards:function(a){this.$shelf.append(a);this.bindImageLoadEvents(a);this.$carousel.trigger("change")},updateArrows:function(){var b=this,c=b.getDimensions();a.each([{$e:b.$left,enabled:0<c.shelfLeft},{$e:b.$right,enabled:c.shelfLeft<c.maxLeft}],function(c,a){var h=a.$e;a.enabled?h.removeClass("feed-control-disabled"):h.addClass("feed-control-disabled");b.noOpacity&&(a.enabled?h.css("opacity",
"1"):h.css("opacity","0.5"))})},updateScrollThumb:function(){var b=this.getDimensions(),c=b.leftRatio*b.pageWidth,b=Math.min(b.pageRatio*b.pageWidth,b.pageWidth);this.$thumb.width(b).each(function(){a(this).animate({left:c},0)})},logCounter:function(a){"object"===typeof e.ue&&"function"===typeof e.ue.count&&(e.ue.count(a,(e.ue.count(a)||0)+1),e.ue.count("gw-shoveler-click",1))},changePage:function(a){var c=this.getDimensions(),g=this.alignWithItem(c.shelfLeft+a*c.pageWidth),g=Math.min(0>a?g.right:
g.left,c.maxLeft);this.locked()||(this.lock(),c.shelfLeft===g?(this.bounce(this.$shelf,-30*a),this.bounce(this.$thumb,6*a)):this.moveShelf(g,400))},moveShelf:function(a,c){function g(){b.updateArrows();b.unlock()}var b=this;c=c||0;b.shelfLeft=a;if(b.touch)b.$viewport.animate({scrollLeft:a},c,"swing",g);else{var h=b.getDimensions(),h=a/h.shelfWidth*h.pageWidth;b.$shelf.animate({left:-a},c,"swing",g);b.$thumb.animate({left:h},c,"swing",function(){b.updateScrollThumb();b.unlock()})}},getItems:function(){return this.$items},
size:function(){return this.getItems().length},alignWithItem:function(b){if(0>b)return{left:0,right:0};var c=this,g=c.getItems(),h=g.map(function(){var g=c.cardPosition(a(this));if(b>=g.left&&b<=g.right)return g}).get(0);return h?h:c.cardPosition(g.last())},cardPosition:function(a){var c=(a.position()||{left:0,right:0}).left;a=c+a.outerWidth(!0);return{left:c,right:a}},bounce:function(b,c){function g(c){var g={};g[h.touch?"left":"marginLeft"]=c;return g}var h=this;b.each(function(){var b=a(this);
b.animate(g(c),400,"swing",function(){b.animate(g(0),100,"swing",h.unlock)})})},setCardMargin:function(a){this.$shelf.children("li").first()&&this.$shelf.children("li").first().css("margin-right")!==a+"px"&&(this.$shelf.children("li").css("margin-right",a+"px"),this.updateShelf())},adjustCardMargin:function(a){a=a===k||null===a?this.defaultCssRightMargin:a;this.setCardMargin(a);var c=this.getDimensions(),c=0>c.maxLeft?Math.ceil(-c.maxLeft/this.size()):a;this.setCardMargin(c<a?a:c)}};return{createCarousel:function(b,
c,g,h){a(b).each(function(b,l){var d=a(l);new f(d,c,g,h)})}}});b.when("jQuery","SafeP").execute("shoveler-lazy-non-visible-images",function(a,l){function r(a){"object"===typeof f.ue&&"function"===typeof f.ue.count&&f.ue.count(a,(f.ue.count(a)||0)+1)}function h(){f.GWData&&a.each(f.GWData,function(b,c){if(b&&c&&c.data&&!c.loaded){c.loaded=!0;r("gw-lazy-load-all");var g=[];a.each(c.data,function(c,b){g.push(a(b)[0])});g&&0<g.length&&r("gw-lazy-load-non-empty");l&&l.register(b,function(){return{cards:g}})}})}
var f=e;b.when("x1").execute(h);b.when("ready").execute(h);b.when("load").execute(h)});b.register("SafeP",function(){var a={};return{register:function(l,e){"string"===typeof l&&"function"===typeof e&&(a[l]||(a[l]=function(h,l){b.register(h,l);a[h]=function(){}}),a[l]&&a[l](l,e))}}});b.when("A").register("resizeable-inline-video",function(a){function l(a,c){"function"===typeof f.uet&&c&&f.uet(a,c,{wb:1})}function r(a,c){"function"===typeof f.uex&&c&&f.uex(a,c,{wb:1})}var h=
a.$,f=e;return function(e,c,g){function n(){E.removeClass("player-uncommenced viewport-loaded").addClass("viewport-loading player-loading");p.css("z-index",1).css("opacity",1);l("tc","airyInlineVideoLoadingMonitor");l("tc",g.loadingScope);l("bb","airyInlineVideoPlaybackMonitor");l("bb",g.playbackScope)}function q(d){d=d||{};return{play:d.play||C,stop:d.stop||C,resize:d.resize||C,airyReady:d.airyReady||C}}function v(){return new q({airyReady:function(d){n();D=new k(d);D.play()},stop:function(){var d;
d=C;y.removeClass("viewport-loading").addClass("viewport-loaded");p.css("z-index",-1).css("opacity",0);B.length&&t.hide();d()}})}function d(d){return new q({play:function(){D=new k(d);t.fadeOut(1E3,function(){t.css("display","block");t.css("visibility","hidden");n();D.play()})}})}function k(d){return new q({play:function(){A.removeClass("viewport-loading").addClass("viewport-loaded");E.removeClass("player-loading");l("be","airyInlineVideoLoadingMonitor");l("be",g.loadingScope);r("ld","airyInlineVideoLoadingMonitor");
r("ld",g.loadingScope);D=new u(d)}})}function u(d){return new q({stop:function(){D=new z(d);d.pause()}})}function z(d){return new q({})}var y=h(e),p=y.find(".airy-video-container"),t=y.find(".image-map-before"),B=y.find(".image-map-after"),A=y.find(".airy-video-viewport-in"),E=y.add(A),C=function(){},D;g=g||{};l("bb","airyInlineVideoLoadingMonitor");l("bb",g.loadingScope);D=new function(a){function p(d){function a(d){"object"===typeof f.ue&&"function"===typeof f.ue.count&&f.ue.count(d,(f.ue.count(d)||
0)+1)}c.bindings={loadedmetadata:function(d,c){D.airyReady(b);l("cf","airyInlineVideoLoadingMonitor");l("cf",g.loadingScope)},videounsupportederror:function(d,c){a("airyResizableInlineVideoUnsupportedError")},decodeerror:function(d,c){a("airyResizableInlineVideoDecodeError")},networkerror:function(d,c){a("airyResizableInlineVideoNetworkError")},undefinederror:function(d,c){a("airyResizableInlineVideoUndefinedError")},beganplaying:function(){D.play()},ended:function(){l("af","airyInlineVideoPlaybackMonitor");
l("af",g.playbackScope);D.stop()}};var b=d.embed(c);g.autoPlay&&b.play({isAsync:!0})}a=a||{};f.gwAiryAssetLoaded||(f.gwAiryAssetLoaded=a,a.js&&b.load.js(a.js),a.css&&b.load.css(a.css));E.addClass("player-uncommenced");g.whenReady?b.when("Airy","ready").execute(p):b.when("Airy").execute(p);return new q({airyReady:function(c){D=new d(c);D.play()},play:function(){D=new v}})}(g.airyAssetUrls);(function(){a.on("resize",function(){D.resize()})})()}})});